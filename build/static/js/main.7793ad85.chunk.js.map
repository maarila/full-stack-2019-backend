{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","services_persons","axios","get","then","response","data","personObject","post","id","delete","concat","put","Header","_ref","text","react_default","a","createElement","Subheader","_ref2","Persons","_ref3","persons","handleClick","map","person","App_Person","key","name","Person","_ref4","number","onClick","Filter","_ref5","value","handleChange","onChange","Notification","_ref6","message","classToUse","className","PersonForm","_ref7","submit","nameValue","nameChange","numberValue","numberChange","onSubmit","type","App","_useState","useState","_useState2","Object","slicedToArray","setPersons","_useState3","_useState4","newName","setNewName","_useState5","_useState6","newNumber","setNewNumber","_useState7","_useState8","newFilter","setNewFilter","_useState9","_useState10","notification","setNotification","_useState11","_useState12","errorMessage","setErrorMessage","useEffect","personService","removePerson","personToRemove","find","window","confirm","filter","setTimeout","App_Header","App_Notification","App_Filter","event","target","App_Subheader","App_PersonForm","preventDefault","personExists","updatedPerson","catch","error","alert","length","App_Persons","toLowerCase","includes","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.7793ad85.chunk.js","sourcesContent":["import axios from 'axios';\n\nconst baseUrl = '/api/persons';\n\nconst getAll = () => {\n  const request = axios.get(baseUrl);\n  return request.then(response => response.data);\n};\n\nconst create = personObject => {\n  const request = axios.post(baseUrl, personObject);\n  return request.then(response => response.data);\n};\n\nconst remove = id => {\n  const request = axios.delete(`${baseUrl}/${id}`);\n  return request.then(response => response.data);\n};\n\nconst update = personObject => {\n  const request = axios.put(`${baseUrl}/${personObject.id}`, personObject);\n  return request.then(response => response.data);\n};\n\nexport default { getAll, create, remove, update };\n","import React, { useState, useEffect } from 'react';\nimport personService from './services/persons';\n\nconst Header = ({ text }) => <h1>{text}</h1>;\n\nconst Subheader = ({ text }) => <h2>{text}</h2>;\n\nconst Persons = ({ persons, handleClick }) => {\n  return persons.map(person => (\n    <Person key={person.name} person={person} handleClick={handleClick} />\n  ));\n};\n\nconst Person = ({ person, handleClick }) => (\n  <div>\n    {person.name} {person.number}\n    <button onClick={() => handleClick(person.id)}>poista</button>\n  </div>\n);\n\nconst Filter = ({ text, value, handleChange }) => {\n  return (\n    <div>\n      {text} <input value={value} onChange={handleChange} />\n    </div>\n  );\n};\n\nconst Notification = ({ message, classToUse }) => {\n  if (message === null) {\n    return null;\n  }\n\n  return <div className={classToUse}>{message}</div>;\n};\n\nconst PersonForm = ({\n  name,\n  number,\n  submit,\n  nameValue,\n  nameChange,\n  numberValue,\n  numberChange\n}) => {\n  return (\n    <form onSubmit={submit}>\n      <div>\n        {name} <input value={nameValue} onChange={nameChange} />\n      </div>\n      <div>\n        {number} <input value={numberValue} onChange={numberChange} />\n      </div>\n      <div>\n        <button type=\"submit\">lisää</button>\n      </div>\n    </form>\n  );\n};\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n  const [newFilter, setNewFilter] = useState('');\n  const [notification, setNotification] = useState(null);\n  const [errorMessage, setErrorMessage] = useState(null);\n\n  useEffect(() => {\n    personService.getAll().then(response => {\n      setPersons(response);\n    });\n  }, []);\n\n  const addName = event => {\n    event.preventDefault();\n    const personExists = persons.find(person => person.name === newName);\n\n    if (personExists && personExists.number !== newNumber) {\n      const replaceNumber = window.confirm(\n        `${newName} on jo luettelossa, korvataanko vanha numero uudella`\n      );\n      if (replaceNumber) {\n        const updatedPerson = {\n          id: personExists.id,\n          name: personExists.name,\n          number: newNumber\n        };\n        personService\n          .update(updatedPerson)\n          .then(response => {\n            setPersons(\n              persons\n                .filter(person => person.id !== response.id)\n                .concat(response)\n            );\n            setNotification(`Numero muutettu henkilölle ${personExists.name}.`);\n            setNewName('');\n            setNewNumber('');\n            setTimeout(() => {\n              setNotification(null);\n            }, 3000);\n          })\n          .catch(error => {\n            setErrorMessage(`Henkilö ${personExists.name} oli jo poistettu.`);\n            setNewName('');\n            setNewNumber('');\n            setTimeout(() => {\n              setErrorMessage(null);\n            }, 3000);\n            setPersons(persons.filter(person => person.name !== newName));\n          });\n      }\n    } else if (personExists) {\n      alert(`${personExists.name} on jo luettelossa`);\n      return;\n    } else {\n      const newPerson = {\n        name: newName,\n        number: newNumber\n      };\n      personService.create(newPerson).then(response => {\n        setPersons(persons.concat(response));\n        setNotification(`${newName} lisätty.`);\n        setNewName('');\n        setNewNumber('');\n        setTimeout(() => {\n          setNotification(null);\n        }, 3000);\n      }).catch(error => {\n        // console.log(error.response.data.error)\n        setErrorMessage(error.response.data.error);\n        setTimeout(() => {\n          setNotification(null);\n        }, 3000);\n      });\n    }\n  };\n\n  const handleNameChange = event => {\n    setNewName(event.target.value);\n  };\n\n  const handleNumberChange = event => {\n    setNewNumber(event.target.value);\n  };\n\n  const handleFilterChange = event => {\n    setNewFilter(event.target.value);\n  };\n\n  const removePerson = id => {\n    const personToRemove = persons.find(person => person.id === id);\n    const result = window.confirm(`Poistetaanko ${personToRemove.name}?`);\n    if (result) {\n      personService.remove(id).then(response => {\n        setPersons(persons.filter(person => person.id !== id));\n        setNotification(`${personToRemove.name} poistettu.`);\n        setTimeout(() => {\n          setNotification(null);\n        }, 3000);\n      });\n    }\n  };\n\n  return (\n    <div>\n      <Header text=\"Puhelinluettelo\" />\n      <Notification message={notification} classToUse={'message'} />\n      <Notification message={errorMessage} classToUse={'error'} />\n      <Filter\n        text=\"rajaa näytettäviä: \"\n        value={newFilter}\n        handleChange={handleFilterChange}\n      />\n      <Subheader text=\"Lisää uusi\" />\n      <PersonForm\n        name=\"nimi: \"\n        number=\"numero: \"\n        submit={addName}\n        nameValue={newName}\n        nameChange={handleNameChange}\n        numberValue={newNumber}\n        numberChange={handleNumberChange}\n      />\n      <Subheader text=\"Numerot\" />\n      <div>\n        {newFilter.length === 0 ? (\n          <Persons persons={persons} handleClick={removePerson} />\n        ) : (\n          <Persons\n            persons={persons.filter(person =>\n              person.name.toLowerCase().includes(newFilter.toLowerCase())\n            )}\n            handleClick={removePerson}\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}